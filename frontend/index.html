<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Numerology API - Predict Match Outcomes</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <header>
        <nav>
            <a href="index.html">üîÆ Sports Numerology</a>
            <div id="nav-links">
                <a href="#demo">Demo</a>
                <a href="#features">Features</a>
                <a href="#pricing">Pricing</a>
                <a href="login.html" id="login-link">Sign In</a>
                <a href="signup.html" id="signup-link">Get Started</a>
                <a href="dashboard.html" id="dashboard-link" hidden>Dashboard</a>
                <button onclick="logout()" id="logout-btn" hidden>Logout</button>
            </div>
        </nav>
    </header>

    <main>
        <section id="hero">
            <article>
                <h1>Predict Sports Matches with Numerology</h1>
                <p>Scientific analysis of athlete birthdates vs match timing. Get data-driven predictions for tennis, boxing, MMA, and more.</p>
                <div>
                    <a href="#demo">Try It Free</a>
                    <a href="#features">Learn More</a>
                </div>
                <aside>
                    <figure>
                        <figcaption>10K+ Analyses</figcaption>
                    </figure>
                    <figure>
                        <figcaption>500+ API Users</figcaption>
                    </figure>
                    <figure>
                        <figcaption>5 Sports</figcaption>
                    </figure>
                </aside>
            </article>
        </section>

        <section id="demo">
            <article>
                <header>
                    <h2>Try the Demo</h2>
                    <p>5 free analyses per day. No signup required.</p>
                </header>
                
                <form id="demo-form" onsubmit="analyzeMatch(); return false;">
                    <fieldset>
                        <label>Player 1 Name</label>
                        <input type="text" id="player1" placeholder="e.g., Novak Djokovic" required>
                    </fieldset>
                    <fieldset>
                        <label>Player 1 Birth Date</label>
                        <input type="date" id="birth1" required>
                    </fieldset>
                    <fieldset>
                        <label>Player 2 Name</label>
                        <input type="text" id="player2" placeholder="e.g., Rafael Nadal" required>
                    </fieldset>
                    <fieldset>
                        <label>Player 2 Birth Date</label>
                        <input type="date" id="birth2" required>
                    </fieldset>
                    <fieldset>
                        <label>Sport</label>
                        <select id="sport">
                            <option value="tennis">Tennis</option>
                            <option value="table-tennis">Table Tennis</option>
                            <option value="boxing">Boxing</option>
                            <option value="mma">MMA</option>
                        </select>
                    </fieldset>
                    <fieldset>
                        <label>Match Date</label>
                        <input type="date" id="match-date" required>
                    </fieldset>
                    
                    <button type="submit" id="analyze-btn">üîÆ Analyze Match</button>
                </form>
                
                <div id="loading" hidden>
                    <p>Analyzing...</p>
                </div>
                
                <article id="results" hidden>
                    <header>
                        <h3>üèÜ Winner: <span id="winner-name"></span></h3>
                    </header>
                    <p id="result-description"></p>
                    <section>
                        <figure>
                            <figcaption>Player 1 Score</figcaption>
                            <data id="p1-score">-</data>
                        </figure>
                        <figure>
                            <figcaption>Player 2 Score</figcaption>
                            <data id="p2-score">-</data>
                        </figure>
                        <figure>
                            <figcaption>Confidence</figcaption>
                            <data id="confidence">-</data>
                        </figure>
                        <figure>
                            <figcaption>Lucky Number</figcaption>
                            <data id="lucky-number">-</data>
                        </figure>
                    </section>
                    <footer>
                        <p id="demo-note"></p>
                    </footer>
                </article>
            </article>
        </section>

        <section id="features">
            <header>
                <h2>How It Works</h2>
            </header>
            <article>
                <h3>1Ô∏è‚É£ Life Path Analysis</h3>
                <p>We calculate each athlete's Life Path number from their birth date to determine their core energy.</p>
            </article>
            <article>
                <h3>2Ô∏è‚É£ Universal Cycles</h3>
                <p>We analyze the Universal Year, Month, and Day of the match to find harmonious alignments.</p>
            </article>
            <article>
                <h3>3Ô∏è‚É£ Winning Prediction</h3>
                <p>The athlete with stronger numerological alignment to the match date has the advantage.</p>
            </article>
        </section>

        <section id="pricing">
            <header>
                <h2>Pricing</h2>
            </header>
            <article>
                <header>
                    <h3>Free</h3>
                    <data value="0">$0</data>
                </header>
                <ul>
                    <li>5 analyses per day</li>
                    <li>Basic numerology report</li>
                    <li>Web interface access</li>
                </ul>
                <footer>
                    <a href="#demo">Try Free</a>
                </footer>
            </article>
            <article>
                <header>
                    <h3>Pro</h3>
                    <data value="19">$19/mo</data>
                </header>
                <ul>
                    <li>Unlimited analyses</li>
                    <li>API access</li>
                    <li>Detailed reports</li>
                    <li>Priority support</li>
                </ul>
                <footer>
                    <a href="signup.html">Get Started</a>
                </footer>
            </article>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 Sports Numerology API. All rights reserved.</p>
    </footer>

    <script>
        // Check auth state
        const token = localStorage.getItem('token');
        const user = JSON.parse(localStorage.getItem('user') || '{}');
        
        if (token) {
            // User is logged in - show dashboard/logout, hide login/signup
            document.getElementById('login-link').hidden = true;
            document.getElementById('signup-link').hidden = true;
            document.getElementById('dashboard-link').hidden = false;
            document.getElementById('logout-btn').hidden = false;
        }
        
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.reload();
        }

        async function analyzeMatch() {
            const btn = document.getElementById('analyze-btn');
            const loading = document.getElementById('loading');
            const results = document.getElementById('results');
            
            const player1 = document.getElementById('player1').value;
            const birth1 = document.getElementById('birth1').value;
            const player2 = document.getElementById('player2').value;
            const birth2 = document.getElementById('birth2').value;
            const sport = document.getElementById('sport').value;
            const matchDate = document.getElementById('match-date').value;
            
            btn.disabled = true;
            loading.hidden = false;
            results.hidden = true;
            
            try {
                const response = await fetch('/api/v1/demo-analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        player1_name: player1,
                        player1_birthdate: birth1,
                        player2_name: player2,
                        player2_birthdate: birth2,
                        match_date: matchDate,
                        sport: sport
                    })
                });
                
                if (response.status === 429) {
                    alert('Demo limit reached (5 per day). Please sign up for unlimited access.');
                    return;
                }
                
                const data = await response.json();
                
                document.getElementById('winner-name').textContent = data.winner_prediction;
                document.getElementById('result-description').textContent = data.analysis_summary;
                document.getElementById('p1-score').textContent = data.player1?.score || '-';
                document.getElementById('p2-score').textContent = data.player2?.score || '-';
                document.getElementById('confidence').textContent = data.confidence;
                document.getElementById('lucky-number').textContent = data.universal_day || '-';
                
                if (data.remaining_tries !== undefined) {
                    document.getElementById('demo-note').textContent = `${data.remaining_tries} free tries remaining today`;
                }
                
                results.hidden = false;
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                btn.disabled = false;
                loading.hidden = true;
            }
        }
    </script>
</body>
</html>
